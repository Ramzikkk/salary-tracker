<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–∞—Ä–ø–ª–∞—Ç—ã</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-gray-100 to-gray-200 min-h-screen">
    <div id="app" class="container mx-auto px-4 py-8 max-w-7xl"></div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, query, where, setDoc, getDoc, orderBy } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // üîê –ù–ê–°–¢–†–û–ô–ö–ê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò - –£–ö–ê–ñ–ò –°–í–û–ô EMAIL –ù–ê–ß–ê–õ–¨–ù–ò–ö–ê –ó–î–ï–°–¨!
        const MANAGER_EMAIL = "manager@example.com"; // ‚Üê –ò–ó–ú–ï–ù–ò –ù–ê –°–í–û–ô EMAIL!

        const firebaseConfig = {
            apiKey: "AIzaSyBxCYvHpwC37-NuQ_-iNhNpiApS7_qfQps",
            authDomain: "salary-tracker-b3e7f.firebaseapp.com",
            projectId: "salary-tracker-b3e7f",
            storageBucket: "salary-tracker-b3e7f.firebasestorage.app",
            messagingSenderId: "309704635672",
            appId: "1:309704635672:web:510375311149bac6701a6d"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let currentUser = null;
        let userProfile = null;
        let shifts = [];
        let deductions = [];
        let allBaristas = [];
        let selectedMonth = 'all';
        let selectedBaristaId = 'all';
        let showSettings = false;
        let userSettings = {
            cashPercent: 3,
            locations: {
                boxpark: { name: '–ë–æ–∫—Å –ø–∞—Ä–∫', fullHours: 15, fullSalary: 10000 },
                aport: { name: '–ê–ø–æ—Ä—Ç', fullHours: 14, fullSalary: 10000 },
                saryarka: { name: '–°–∞—Ä—ã –∞—Ä–∫–∞', fullHours: 18, fullSalary: 13000 }
            }
        };

        // === AUTH FUNCTIONS ===
        async function register() {
            const email = document.getElementById('auth-email').value;
            const password = document.getElementById('auth-password').value;
            const name = document.getElementById('auth-name').value;
            const role = document.getElementById('auth-role').value;

            if (!email || !password || !name) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }

            try {
                // üîê –ü–†–û–í–ï–†–ö–ê: —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–π email –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞—á–∞–ª—å–Ω–∏–∫–æ–º
                const actualRole = email.toLowerCase() === MANAGER_EMAIL.toLowerCase() ? 'manager' : role;
                
                if (email.toLowerCase() === MANAGER_EMAIL.toLowerCase() && role !== 'manager') {
                    alert('‚ö†Ô∏è –≠—Ç–æ—Ç email –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–∏–∫–∞!');
                    return;
                }

                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;

                await setDoc(doc(db, 'users', user.uid), {
                    name: name,
                    email: email,
                    role: actualRole,
                    createdAt: new Date().toISOString()
                });

                await setDoc(doc(db, 'userSettings', user.uid), userSettings);

                alert('‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!');
            } catch (error) {
                alert('–û—à–∏–±–∫–∞: ' + error.message);
            }
        }

        async function login() {
            const email = document.getElementById('auth-email').value;
            const password = document.getElementById('auth-password').value;

            if (!email || !password) {
                alert('–í–≤–µ–¥–∏—Ç–µ email –∏ –ø–∞—Ä–æ–ª—å!');
                return;
            }

            try {
                await signInWithEmailAndPassword(auth, email, password);
            } catch (error) {
                alert('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + error.message);
            }
        }

        async function logout() {
            try {
                await signOut(auth);
                currentUser = null;
                userProfile = null;
                shifts = [];
                deductions = [];
                selectedMonth = 'all';
                showSettings = false;
                render();
            } catch (error) {
                alert('–û—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞: ' + error.message);
            }
        }

        async function loadUserProfile() {
            if (!currentUser) return;
            
            const userDoc = await getDoc(doc(db, 'users', currentUser.uid));
            if (userDoc.exists()) {
                userProfile = { id: currentUser.uid, ...userDoc.data() };
            }
        }

        async function loadUserSettings() {
            if (!currentUser) return;
            
            const settingsDoc = await getDoc(doc(db, 'userSettings', currentUser.uid));
            if (settingsDoc.exists()) {
                userSettings = settingsDoc.data();
            } else {
                await setDoc(doc(db, 'userSettings', currentUser.uid), userSettings);
            }
        }

        // === DATA FUNCTIONS ===
        async function loadData() {
            if (!currentUser) return;

            if (userProfile.role === 'manager') {
                await loadAllBaristas();
                await loadAllShifts();
                await loadAllDeductions();
            } else {
                await loadMyShifts();
                await loadMyDeductions();
            }

            render();
        }

        async function loadAllBaristas() {
            const q = query(collection(db, 'users'), where('role', 'in', ['barista', 'intern']));
            const snapshot = await getDocs(q);
            allBaristas = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
        }

        async function loadAllShifts() {
            const q = query(collection(db, 'shifts'), orderBy('date', 'desc'));
            const snapshot = await getDocs(q);
            shifts = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
        }

        async function loadAllDeductions() {
            const snapshot = await getDocs(collection(db, 'deductions'));
            deductions = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
        }

        async function loadMyShifts() {
            const q = query(
                collection(db, 'shifts'),
                where('userId', '==', currentUser.uid),
                orderBy('date', 'desc')
            );
            const snapshot = await getDocs(q);
            shifts = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
        }

        async function loadMyDeductions() {
            const q = query(collection(db, 'deductions'), where('userId', '==', currentUser.uid));
            const snapshot = await getDocs(q);
            deductions = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
        }

        async function addShift() {
            const date = document.getElementById('shift-date').value;
            const location = document.getElementById('shift-location').value;
            const startTime = document.getElementById('shift-start').value;
            const endTime = document.getElementById('shift-end').value;
            const cash = parseFloat(document.getElementById('shift-cash').value) || 0;

            if (!date || !startTime || !endTime) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }

            const hours = calculateHours(startTime, endTime);
            const isIntern = userProfile.role === 'intern';
            
            let hourlySalary, cashBonus;
            
            if (isIntern) {
                hourlySalary = (5000 / 8) * hours;
                cashBonus = 0;
            } else {
                const loc = userSettings.locations[location];
                const hourlyRate = loc.fullSalary / loc.fullHours;
                hourlySalary = hourlyRate * hours;
                cashBonus = cash * (userSettings.cashPercent / 100);
            }

            const shiftData = {
                userId: currentUser.uid,
                userName: userProfile.name,
                userRole: userProfile.role,
                date: date,
                location: location,
                startTime: startTime,
                endTime: endTime,
                hours: hours,
                cash: cash,
                hourlySalary: hourlySalary,
                cashBonus: cashBonus,
                cashPercent: userSettings.cashPercent,
                createdAt: new Date().toISOString()
            };

            try {
                await addDoc(collection(db, 'shifts'), shiftData);
                document.getElementById('shift-cash').value = '';
                document.getElementById('shift-start').value = '';
                document.getElementById('shift-end').value = '';
                await loadData();
            } catch (error) {
                alert('–û—à–∏–±–∫–∞: ' + error.message);
            }
        }

        async function deleteShift(id) {
            if (!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É —Å–º–µ–Ω—É?')) return;
            
            try {
                await deleteDoc(doc(db, 'shifts', id));
                await loadData();
            } catch (error) {
                alert('–û—à–∏–±–∫–∞: ' + error.message);
            }
        }

        async function addDeduction() {
            const name = document.getElementById('deduction-name').value;
            const amount = parseFloat(document.getElementById('deduction-amount').value);

            if (!name || !amount) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }

            const monthKey = selectedMonth === 'all' ? new Date().toISOString().slice(0, 7) : selectedMonth;

            const deductionData = {
                userId: currentUser.uid,
                userName: userProfile.name,
                name: name,
                amount: amount,
                month: monthKey,
                createdAt: new Date().toISOString()
            };

            try {
                await addDoc(collection(db, 'deductions'), deductionData);
                document.getElementById('deduction-name').value = '';
                document.getElementById('deduction-amount').value = '';
                await loadData();
            } catch (error) {
                alert('–û—à–∏–±–∫–∞: ' + error.message);
            }
        }

        async function deleteDeduction(id) {
            if (!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –≤—ã—á–µ—Ç?')) return;
            
            try {
                await deleteDoc(doc(db, 'deductions', id));
                await loadData();
            } catch (error) {
                alert('–û—à–∏–±–∫–∞: ' + error.message);
            }
        }

        function calculateHours(start, end) {
            const [startH, startM] = start.split(':').map(Number);
            const [endH, endM] = end.split(':').map(Number);
            
            let startMinutes = startH * 60 + startM;
            let endMinutes = endH * 60 + endM;
            
            if (endMinutes <= startMinutes) {
                endMinutes += 24 * 60;
            }
            
            return (endMinutes - startMinutes) / 60;
        }

        // === SETTINGS FUNCTIONS ===
        function toggleSettings() {
            showSettings = !showSettings;
            render();
        }

        function updateLocationSetting(key, field, value) {
            userSettings.locations[key][field] = field === 'name' ? value : parseFloat(value);
        }

        function updateCashPercent(value) {
            userSettings.cashPercent = parseFloat(value);
        }

        async function saveUserSettings() {
            try {
                await setDoc(doc(db, 'userSettings', currentUser.uid), userSettings);
                alert('‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
                showSettings = false;
                render();
            } catch (error) {
                alert('–û—à–∏–±–∫–∞: ' + error.message);
            }
        }

        // === FILTER & STATS FUNCTIONS ===
        function changeMonth(month) {
            selectedMonth = month;
            render();
        }

        function changeBarista(baristaId) {
            selectedBaristaId = baristaId;
            render();
        }

        function getAvailableMonths(shiftsArray) {
            const months = new Set(shiftsArray.map(s => s.date.slice(0, 7)));
            return Array.from(months).sort().reverse();
        }

        function filterShiftsByMonth(shiftsArray, month) {
            if (month === 'all') return shiftsArray;
            return shiftsArray.filter(s => s.date.startsWith(month));
        }

        function filterDeductionsByMonth(deductionsArray, month) {
            if (month === 'all') return deductionsArray;
            return deductionsArray.filter(d => d.month === month);
        }

        function filterShiftsByBarista(shiftsArray, baristaId) {
            if (baristaId === 'all') return shiftsArray;
            return shiftsArray.filter(s => s.userId === baristaId);
        }

        function getMonthName(monthKey) {
            if (monthKey === 'all') return '–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞';
            const months = ['—è–Ω–≤', '—Ñ–µ–≤', '–º–∞—Ä', '–∞–ø—Ä', '–º–∞–π', '–∏—é–Ω', '–∏—é–ª', '–∞–≤–≥', '—Å–µ–Ω', '–æ–∫—Ç', '–Ω–æ—è', '–¥–µ–∫'];
            const [year, month] = monthKey.split('-');
            return `${months[parseInt(month) - 1]} ${year}`;
        }

        function getStatsByLocation(shiftsArray, isIntern) {
            if (isIntern) return {};
            
            const stats = {};
            shiftsArray.forEach(shift => {
                if (!stats[shift.location]) {
                    stats[shift.location] = {
                        name: userSettings.locations[shift.location]?.name || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
                        shifts: 0,
                        hours: 0,
                        cash: 0,
                        hourlySalary: 0,
                        cashBonus: 0,
                        total: 0
                    };
                }
                stats[shift.location].shifts++;
                stats[shift.location].hours += shift.hours;
                stats[shift.location].cash += shift.cash;
                stats[shift.location].hourlySalary += shift.hourlySalary;
                stats[shift.location].cashBonus += shift.cashBonus;
                stats[shift.location].total += shift.hourlySalary + shift.cashBonus;
            });
            return stats;
        }

        function getTotals(shiftsArray, deductionsArray) {
            const totalShifts = shiftsArray.length;
            const totalHours = shiftsArray.reduce((sum, s) => sum + s.hours, 0);
            const totalCash = shiftsArray.reduce((sum, s) => sum + s.cash, 0);
            const totalHourlySalary = shiftsArray.reduce((sum, s) => sum + s.hourlySalary, 0);
            const totalCashBonus = shiftsArray.reduce((sum, s) => sum + s.cashBonus, 0);
            const grossTotal = totalHourlySalary + totalCashBonus;
            const totalDeductions = deductionsArray.reduce((sum, d) => sum + d.amount, 0);
            const netTotal = grossTotal - totalDeductions;

            return {
                totalShifts,
                totalHours,
                totalCash,
                totalHourlySalary,
                totalCashBonus,
                grossTotal,
                totalDeductions,
                netTotal
            };
        }

        // === RENDER FUNCTIONS ===
        function renderAuth() {
            document.getElementById('app').innerHTML = `
                <div class="max-w-md mx-auto">
                    <div class="bg-white rounded-2xl shadow-2xl p-8">
                        <div class="text-center mb-8">
                            <h1 class="text-4xl font-bold text-gray-800 mb-2">üí∞ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h1>
                            <p class="text-gray-600">–ó–∞—Ä–ø–ª–∞—Ç—ã –±–∞—Ä–∏—Å—Ç</p>
                        </div>

                        <div class="space-y-4 mb-6">
                            <input type="email" id="auth-email" placeholder="Email" 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            <input type="password" id="auth-password" placeholder="–ü–∞—Ä–æ–ª—å" 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            <input type="text" id="auth-name" placeholder="–í–∞—à–µ –∏–º—è" 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            <select id="auth-role" 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                                <option value="barista">‚òï –ë–∞—Ä–∏—Å—Ç–∞</option>
                                <option value="intern">üë®‚Äçüéì –°—Ç–∞–∂—ë—Ä</option>
                            </select>
                        </div>

                        <div class="bg-green-50 border border-green-200 p-3 rounded-lg mb-4">
                            <p class="text-xs text-green-800">
                                üîê <strong>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:</strong> –†–æ–ª—å –Ω–∞—á–∞–ª—å–Ω–∏–∫–∞ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ email
                            </p>
                        </div>

                        <div class="space-y-3">
                            <button onclick="window.login()" 
                                class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg transition">
                                üîë –í–æ–π—Ç–∏
                            </button>
                            <button onclick="window.register()" 
                                class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg transition">
                                ‚ûï –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderManagerView() {
            const baristaShifts = selectedBaristaId === 'all' 
                ? shifts 
                : filterShiftsByBarista(shifts, selectedBaristaId);

            const baristaDeductions = selectedBaristaId === 'all'
                ? deductions
                : deductions.filter(d => d.userId === selectedBaristaId);

            const availableMonths = getAvailableMonths(baristaShifts);
            const monthShifts = filterShiftsByMonth(baristaShifts, selectedMonth);
            const monthDeductions = filterDeductionsByMonth(baristaDeductions, selectedMonth);

            const groupedByBarista = {};
            monthShifts.forEach(shift => {
                if (!groupedByBarista[shift.userId]) {
                    groupedByBarista[shift.userId] = {
                        name: shift.userName,
                        role: shift.userRole,
                        shifts: [],
                        deductions: []
                    };
                }
                groupedByBarista[shift.userId].shifts.push(shift);
            });

            monthDeductions.forEach(deduction => {
                if (groupedByBarista[deduction.userId]) {
                    groupedByBarista[deduction.userId].deductions.push(deduction);
                }
            });

            document.getElementById('app').innerHTML = `
                <div class="bg-white rounded-2xl shadow-xl p-6 mb-6">
                    <div class="flex justify-between items-center flex-wrap gap-4">
                        <div>
                            <h1 class="text-3xl font-bold text-gray-800 mb-2">üëî –ü–∞–Ω–µ–ª—å –Ω–∞—á–∞–ª—å–Ω–∏–∫–∞</h1>
                            <p class="text-gray-600">${userProfile.name} (${currentUser.email})</p>
                        </div>
                        <button onclick="window.logout()" 
                            class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition">
                            üö™ –í—ã—Ö–æ–¥
                        </button>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">üë• –í—ã–±–µ—Ä–∏—Ç–µ –±–∞—Ä–∏—Å—Ç–∞</h2>
                    <div class="flex flex-wrap gap-2">
                        <button onclick="window.changeBarista('all')" 
                            class="px-4 py-2 rounded-lg font-semibold transition ${selectedBaristaId === 'all' ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}">
                            –í—Å–µ –±–∞—Ä–∏—Å—Ç–∞
                        </button>
                        ${allBaristas.map(barista => `
                            <button onclick="window.changeBarista('${barista.id}')" 
                                class="px-4 py-2 rounded-lg font-semibold transition ${selectedBaristaId === barista.id ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}">
                                ${barista.role === 'intern' ? 'üë®‚Äçüéì' : '‚òï'} ${barista.name}
                            </button>
                        `).join('')}
                    </div>
                </div>

                ${availableMonths.length > 0 ? `
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">üìÖ –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥</h2>
                    <div class="flex flex-wrap gap-2">
                        <button onclick="window.changeMonth('all')" 
                            class="px-4 py-2 rounded-lg font-semibold transition ${selectedMonth === 'all' ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}">
                            –í—Å–µ –≤—Ä–µ–º—è
                        </button>
                        ${availableMonths.map(month => `
                            <button onclick="window.changeMonth('${month}')" 
                                class="px-4 py-2 rounded-lg font-semibold transition ${selectedMonth === month ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}">
                                ${getMonthName(month)}
                            </button>
                        `).join('')}
                    </div>
                </div>
                ` : ''}

                <div class="space-y-6">
                    ${Object.entries(groupedByBarista).map(([userId, data]) => {
                        const totals = getTotals(data.shifts, data.deductions);
                        const isIntern = data.role === 'intern';
                        const roleLabel = isIntern ? 'üë®‚Äçüéì –°—Ç–∞–∂—ë—Ä' : '‚òï –ë–∞—Ä–∏—Å—Ç–∞';

                        return `
                            <div class="bg-white rounded-xl shadow-lg p-6">
                                <h2 class="text-2xl font-bold text-gray-800 mb-4">${roleLabel}: ${data.name}</h2>
                                
                                <div class="grid md:grid-cols-4 gap-4 mb-6">
                                    <div class="bg-blue-50 rounded-lg p-4">
                                        <div class="text-sm text-blue-600 mb-1">–°–º–µ–Ω</div>
                                        <div class="text-2xl font-bold text-blue-900">${totals.totalShifts}</div>
                                    </div>
                                    <div class="bg-purple-50 rounded-lg p-4">
                                        <div class="text-sm text-purple-600 mb-1">–ß–∞—Å–æ–≤</div>
                                        <div class="text-2xl font-bold text-purple-900">${totals.totalHours.toFixed(1)}—á</div>
                                    </div>
                                    <div class="bg-green-50 rounded-lg p-4">
                                        <div class="text-sm text-green-600 mb-1">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</div>
                                        <div class="text-2xl font-bold text-green-900">${totals.grossTotal.toFixed(0).toLocaleString()}‚Ç∏</div>
                                    </div>
                                    <div class="bg-indigo-50 rounded-lg p-4">
                                        <div class="text-sm text-indigo-600 mb-1">–ö –≤—ã–ø–ª–∞—Ç–µ</div>
                                        <div class="text-2xl font-bold text-indigo-900">${totals.netTotal.toFixed(0).toLocaleString()}‚Ç∏</div>
                                    </div>
                                </div>

                                ${data.shifts.length > 0 ? `
                                <div class="overflow-x-auto">
                                    <table class="w-full text-sm">
                                        <thead class="bg-gray-50">
                                            <tr>
                                                <th class="px-3 py-2 text-left font-semibold text-gray-700">–î–∞—Ç–∞</th>
                                                ${!isIntern ? '<th class="px-3 py-2 text-left font-semibold text-gray-700">–¢–æ—á–∫–∞</th>' : ''}
                                                <th class="px-3 py-2 text-right font-semibold text-gray-700">–í—Ä–µ–º—è</th>
                                                <th class="px-3 py-2 text-right font-semibold text-gray-700">–ß–∞—Å—ã</th>
                                                <th class="px-3 py-2 text-right font-semibold text-gray-700">–ö–∞—Å—Å–∞</th>
                                                <th class="px-3 py-2 text-right font-semibold text-gray-700">–ó–ü</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-gray-200">
                                            ${data.shifts.map(shift => `
                                                <tr class="hover:bg-gray-50">
                                                    <td class="px-3 py-2 text-gray-700">${shift.date}</td>
                                                    ${!isIntern ? `<td class="px-3 py-2 text-gray-700">${userSettings.locations[shift.location]?.name || '–°—Ç–∞–∂—ë—Ä'}</td>` : ''}
                                                    <td class="px-3 py-2 text-right text-gray-700">${shift.startTime}-${shift.endTime}</td>
                                                    <td class="px-3 py-2 text-right text-gray-700">${shift.hours.toFixed(1)}—á</td>
                                                    <td class="px-3 py-2 text-right text-gray-700">${shift.cash.toLocaleString()}‚Ç∏</td>
                                                    <td class="px-3 py-2 text-right font-semibold text-green-600">${(shift.hourlySalary + shift.cashBonus).toFixed(0).toLocaleString()}‚Ç∏</td>
                                                </tr>
                                            `).join('')}
                                        </tbody>
                                    </table>
                                </div>
                                ` : '<p class="text-gray-500 text-center py-4">–ù–µ—Ç —Å–º–µ–Ω –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥</p>'}

                                ${data.deductions.length > 0 ? `
                                <div class="mt-4">
                                    <h3 class="font-bold text-gray-800 mb-2">üí∏ –í—ã—á–µ—Ç—ã:</h3>
                                    <div class="space-y-1">
                                        ${data.deductions.map(d => `
                                            <div class="flex justify-between bg-red-50 px-3 py-2 rounded">
                                                <span class="text-gray-700">${d.name}</span>
                                                <span class="text-red-600 font-semibold">-${d.amount.toLocaleString()}‚Ç∏</span>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                                ` : ''}
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
        }

        function renderSettings() {
            document.getElementById('app').innerHTML = `
                <div class="bg-white rounded-2xl shadow-xl p-6 mb-6">
                    <div class="flex justify-between items-center mb-6">
                        <h1 class="text-3xl font-bold text-gray-800">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
                        <button onclick="window.toggleSettings()" 
                            class="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg font-semibold transition">
                            ‚Üê –ù–∞–∑–∞–¥
                        </button>
                    </div>

                    <div class="space-y-6">
                        <div class="bg-gray-50 p-6 rounded-xl">
                            <h2 class="text-xl font-bold text-gray-800 mb-4">üíµ –ü—Ä–æ—Ü–µ–Ω—Ç —Å –∫–∞—Å—Å—ã</h2>
                            <div class="flex items-center gap-4">
                                <input type="number" step="0.1" value="${userSettings.cashPercent}" 
                                    onchange="window.updateCashPercent(this.value)"
                                    class="w-32 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                <span class="text-gray-700 font-semibold">%</span>
                            </div>
                        </div>

                        <div class="bg-gray-50 p-6 rounded-xl">
                            <h2 class="text-xl font-bold text-gray-800 mb-4">üìç –¢–æ—á–∫–∏ —Ä–∞–±–æ—Ç—ã</h2>
                            <div class="space-y-4">
                                ${Object.entries(userSettings.locations).map(([key, loc]) => `
                                    <div class="bg-white p-4 rounded-lg border border-gray-200">
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                                                <input type="text" value="${loc.name}" 
                                                    onchange="window.updateLocationSetting('${key}', 'name', this.value)"
                                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">–ü–æ–ª–Ω–∞—è —Å–º–µ–Ω–∞ (—á–∞—Å—ã)</label>
                                                <input type="number" step="0.5" value="${loc.fullHours}" 
                                                    onchange="window.updateLocationSetting('${key}', 'fullHours', this.value)"
                                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">–û–∫–ª–∞–¥ (‚Ç∏)</label>
                                                <input type="number" value="${loc.fullSalary}" 
                                                    onchange="window.updateLocationSetting('${key}', 'fullSalary', this.value)"
                                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>

                        <div class="flex gap-4">
                            <button onclick="window.saveUserSettings()" 
                                class="flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-lg transition text-lg">
                                üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                            </button>
                            <button onclick="window.toggleSettings()" 
                                class="px-6 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-4 rounded-lg transition">
                                –û—Ç–º–µ–Ω–∞
                            </button>
                        </div>

                        <div class="bg-yellow-50 border border-yellow-200 p-4 rounded-lg">
                            <p class="text-sm text-yellow-800">
                                <strong>‚ö†Ô∏è –í–∞–∂–Ω–æ:</strong> –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å—Ç–∞—Ä—ã–µ —Å–º–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è —Å —Ç–µ–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, 
                                —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –æ–Ω–∏ –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã. –ù–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –∫ –Ω–æ–≤—ã–º —Å–º–µ–Ω–∞–º.
                            </p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderBaristaView() {
            const availableMonths = getAvailableMonths(shifts);
            const monthShifts = filterShiftsByMonth(shifts, selectedMonth);
            const monthDeductions = filterDeductionsByMonth(deductions, selectedMonth);
            const isIntern = userProfile.role === 'intern';
            const stats = getStatsByLocation(monthShifts, isIntern);
            const totals = getTotals(monthShifts, monthDeductions);
            const today = new Date().toISOString().split('T')[0];

            const roleLabel = isIntern ? 'üë®‚Äçüéì –°—Ç–∞–∂—ë—Ä' : '‚òï –ë–∞—Ä–∏—Å—Ç–∞';

            document.getElementById('app').innerHTML = `
                <div class="bg-white rounded-2xl shadow-xl p-6 mb-6">
                    <div class="flex justify-between items-center flex-wrap gap-4">
                        <div>
                            <h1 class="text-3xl font-bold text-gray-800 mb-2">üí∞ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–∞—Ä–ø–ª–∞—Ç—ã</h1>
                            <p class="text-gray-600">${roleLabel}: ${userProfile.name} (${currentUser.email})</p>
                        </div>
                        <div class="flex gap-2">
                            ${!isIntern ? `
                            <button onclick="window.toggleSettings()" 
                                class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold transition">
                                ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                            </button>
                            ` : ''}
                            <button onclick="window.logout()" 
                                class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition">
                                üö™ –í—ã—Ö–æ–¥
                            </button>
                        </div>
                    </div>
                </div>

                ${isIntern ? `
                <div class="bg-blue-50 border border-blue-200 p-4 rounded-lg mb-6">
                    <p class="text-blue-800">
                        <strong>‚ÑπÔ∏è –°—Ç–∞–∂—ë—Ä:</strong> –í–∞—à–∞ —Å—Ç–∞–≤–∫–∞: 8 —á–∞—Å–æ–≤ = 5000‚Ç∏ –Ω–∞ –ª—é–±–æ–π —Ç–æ—á–∫–µ
                    </p>
                </div>
                ` : ''}

                ${availableMonths.length > 0 ? `
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">üìÖ –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥</h2>
                    <div class="flex flex-wrap gap-2">
                        <button onclick="window.changeMonth('all')" 
                            class="px-4 py-2 rounded-lg font-semibold transition ${selectedMonth === 'all' ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}">
                            –í—Å–µ –≤—Ä–µ–º—è
                        </button>
                        ${availableMonths.map(month => `
                            <button onclick="window.changeMonth('${month}')" 
                                class="px-4 py-2 rounded-lg font-semibold transition ${selectedMonth === month ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}">
                                ${getMonthName(month)}
                            </button>
                        `).join('')}
                    </div>
                </div>
                ` : ''}

                <div class="bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl shadow-lg p-6 text-white mb-6">
                    <h2 class="text-2xl font-bold mb-4">üìä ${getMonthName(selectedMonth)}</h2>
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <div class="text-sm opacity-90 mb-1">–°–º–µ–Ω</div>
                            <div class="text-3xl font-bold">${totals.totalShifts}</div>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <div class="text-sm opacity-90 mb-1">–ß–∞—Å–æ–≤</div>
                            <div class="text-3xl font-bold">${totals.totalHours.toFixed(1)}—á</div>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <div class="text-sm opacity-90 mb-1">–ö–∞—Å—Å–∞</div>
                            <div class="text-2xl font-bold">${totals.totalCash.toLocaleString()}‚Ç∏</div>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <div class="text-sm opacity-90 mb-1">–ó–ü —Å –æ–∫–ª–∞–¥–∞</div>
                            <div class="text-2xl font-bold">${totals.totalHourlySalary.toFixed(0).toLocaleString()}‚Ç∏</div>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <div class="text-sm opacity-90 mb-1">–ó–ü —Å –∫–∞—Å—Å—ã (${userSettings.cashPercent}%)</div>
                            <div class="text-2xl font-bold">${totals.totalCashBonus.toFixed(0).toLocaleString()}‚Ç∏</div>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <div class="text-sm opacity-90 mb-1">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</div>
                            <div class="text-2xl font-bold">${totals.grossTotal.toFixed(0).toLocaleString()}‚Ç∏</div>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <div class="text-sm opacity-90 mb-1">–í—ã—á–µ—Ç—ã</div>
                            <div class="text-2xl font-bold text-red-300">-${totals.totalDeductions.toLocaleString()}‚Ç∏</div>
                        </div>
                        <div class="bg-white bg-opacity-30 rounded-lg p-4 border-2 border-white">
                            <div class="text-sm opacity-90 mb-1">–ö –ü–û–õ–£–ß–ï–ù–ò–Æ</div>
                            <div class="text-3xl font-bold">${totals.netTotal.toFixed(0).toLocaleString()}‚Ç∏</div>
                        </div>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–º–µ–Ω—É</h2>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">üìÖ –î–∞—Ç–∞</label>
                                <input type="date" id="shift-date" value="${today}" 
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            </div>

                            ${!isIntern ? `
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">üìç –¢–æ—á–∫–∞</label>
                                <select id="shift-location" 
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                    ${Object.entries(userSettings.locations).map(([key, loc]) => 
                                        `<option value="${key}">${loc.name} (${loc.fullHours}—á - ${loc.fullSalary}‚Ç∏)</option>`
                                    ).join('')}
                                </select>
                            </div>
                            ` : `
                            <input type="hidden" id="shift-location" value="intern">
                            <div class="bg-blue-50 p-3 rounded-lg">
                                <p class="text-sm text-blue-800">–°—Ç–∞–∂—ë—Ä: 8—á = 5000‚Ç∏</p>
                            </div>
                            `}

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">üïê –ù–∞—á–∞–ª–æ</label>
                                    <input type="time" id="shift-start" 
                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">üïê –ö–æ–Ω–µ—Ü</label>
                                    <input type="time" id="shift-end" 
                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">üíµ –ö–∞—Å—Å–∞ (‚Ç∏)</label>
                                <input type="number" id="shift-cash" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 50000" 
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            </div>

                            <button onclick="window.addShift()" 
                                class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 rounded-lg transition">
                                ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–º–µ–Ω—É
                            </button>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4">üí∏ –í—ã—á–µ—Ç—ã ${selectedMonth !== 'all' ? '(' + getMonthName(selectedMonth) + ')' : ''}</h2>
                        
                        <div class="space-y-4 mb-4">
                            <input type="text" id="deduction-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ (–∞–≤–∞–Ω—Å, —à—Ç—Ä–∞—Ñ)" 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            <input type="number" id="deduction-amount" placeholder="–°—É–º–º–∞ (‚Ç∏)" 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            <button onclick="window.addDeduction()" 
                                class="w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 rounded-lg transition">
                                –î–æ–±–∞–≤–∏—Ç—å –≤—ã—á–µ—Ç
                            </button>
                        </div>

                        <div class="space-y-2 max-h-64 overflow-y-auto">
                            ${monthDeductions.map(d => `
                                <div class="flex justify-between items-center bg-red-50 p-3 rounded-lg">
                                    <div>
                                        <div class="font-semibold text-gray-800">${d.name}</div>
                                        <div class="text-red-600">-${d.amount.toLocaleString()}‚Ç∏</div>
                                    </div>
                                    <button onclick="window.deleteDeduction('${d.id}')" 
                                        class="text-red-600 hover:text-red-800 text-xl">üóëÔ∏è</button>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>

                ${!isIntern && Object.keys(stats).length > 0 ? `
                <div class="grid md:grid-cols-3 gap-6 mb-6">
                    ${Object.entries(stats).map(([key, stat]) => `
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <h3 class="text-lg font-bold text-gray-800 mb-4">${stat.name}</h3>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">–°–º–µ–Ω:</span>
                                    <span class="font-semibold">${stat.shifts}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">–ß–∞—Å–æ–≤:</span>
                                    <span class="font-semibold">${stat.hours.toFixed(1)}—á</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">–ö–∞—Å—Å–∞:</span>
                                    <span class="font-semibold">${stat.cash.toLocaleString()}‚Ç∏</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">–ó–ü (–æ–∫–ª–∞–¥):</span>
                                    <span class="font-semibold text-green-600">${stat.hourlySalary.toFixed(0).toLocaleString()}‚Ç∏</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">–ó–ü (–∫–∞—Å—Å–∞):</span>
                                    <span class="font-semibold text-green-600">${stat.cashBonus.toFixed(0).toLocaleString()}‚Ç∏</span>
                                </div>
                                <div class="flex justify-between pt-2 border-t">
                                    <span class="text-gray-800 font-bold">–í—Å–µ–≥–æ:</span>
                                    <span class="font-bold text-indigo-600">${stat.total.toFixed(0).toLocaleString()}‚Ç∏</span>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
                ` : ''}

                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">üìã –ò—Å—Ç–æ—Ä–∏—è —Å–º–µ–Ω</h2>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">–î–∞—Ç–∞</th>
                                    ${!isIntern ? '<th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">–¢–æ—á–∫–∞</th>' : ''}
                                    <th class="px-4 py-3 text-right text-sm font-semibold text-gray-700">–í—Ä–µ–º—è</th>
                                    <th class="px-4 py-3 text-right text-sm font-semibold text-gray-700">–ß–∞—Å—ã</th>
                                    <th class="px-4 py-3 text-right text-sm font-semibold text-gray-700">–ö–∞—Å—Å–∞</th>
                                    <th class="px-4 py-3 text-right text-sm font-semibold text-gray-700">–ó–ü (–æ–∫–ª–∞–¥)</th>
                                    <th class="px-4 py-3 text-right text-sm font-semibold text-gray-700">–ó–ü (–∫–∞—Å—Å–∞)</th>
                                    <th class="px-4 py-3 text-right text-sm font-semibold text-gray-700">–ò—Ç–æ–≥–æ</th>
                                    <th class="px-4 py-3"></th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                ${monthShifts.map(shift => `
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-4 py-3 text-sm text-gray-700">${shift.date}</td>
                                        ${!isIntern ? `<td class="px-4 py-3 text-sm text-gray-700">${userSettings.locations[shift.location]?.name || '–°—Ç–∞–∂—ë—Ä'}</td>` : ''}
                                        <td class="px-4 py-3 text-sm text-right text-gray-700">${shift.startTime}-${shift.endTime}</td>
                                        <td class="px-4 py-3 text-sm text-right text-gray-700">${shift.hours.toFixed(1)}—á</td>
                                        <td class="px-4 py-3 text-sm text-right text-gray-700">${shift.cash.toLocaleString()}‚Ç∏</td>
                                        <td class="px-4 py-3 text-sm text-right text-green-600 font-semibold">
                                            ${shift.hourlySalary.toFixed(0).toLocaleString()}‚Ç∏
                                        </td>
                                        <td class="px-4 py-3 text-sm text-right text-green-600 font-semibold">
                                            ${shift.cashBonus.toFixed(0).toLocaleString()}‚Ç∏
                                        </td>
                                        <td class="px-4 py-3 text-sm text-right text-indigo-600 font-bold">
                                            ${(shift.hourlySalary + shift.cashBonus).toFixed(0).toLocaleString()}‚Ç∏
                                        </td>
                                        <td class="px-4 py-3">
                                            <button onclick="window.deleteShift('${shift.id}')" 
                                                class="text-red-600 hover:text-red-800 text-xl">üóëÔ∏è</button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }

        function render() {
            if (!currentUser || !userProfile) {
                renderAuth();
            } else if (userProfile.role === 'manager') {
                renderManagerView();
            } else if (showSettings) {
                renderSettings();
            } else {
                renderBaristaView();
            }
        }

        onAuthStateChanged(auth, async (user) => {
            currentUser = user;
            if (user) {
                await loadUserProfile();
                await loadUserSettings();
                await loadData();
            } else {
                render();
            }
        });

        window.register = register;
        window.login = login;
        window.logout = logout;
        window.addShift = addShift;
        window.deleteShift = deleteShift;
        window.addDeduction = addDeduction;
        window.deleteDeduction = deleteDeduction;
        window.changeMonth = changeMonth;
        window.changeBarista = changeBarista;
        window.toggleSettings = toggleSettings;
        window.updateLocationSetting = updateLocationSetting;
        window.updateCashPercent = updateCashPercent;
        window.saveUserSettings = saveUserSettings;

        render();
    </script>
</body>
</html>
